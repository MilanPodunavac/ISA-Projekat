<div class="container">
    <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12">
            <div class="shadow-1-strong" style="border-radius: 1rem;">
                <h2>Fishing trips grades</h2>
                <table style="margin: 0 auto; width: 50%;" mat-table [dataSource]="dataSourceFishingTrips" class="mat-elevation-z4">
                    <ng-container matColumnDef="name">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Name </th>
                        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                    </ng-container>

                    <ng-container matColumnDef="grade">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Grade </th>
                        <td mat-cell *matCellDef="let element"> 
                            <div *ngIf="element.reviews.length === 0">
                                -
                            </div>
                            <div *ngIf="element.reviews.length !== 0">
                                {{element.grade}}
                            </div>
                        </td>
                    </ng-container>
                
                    <tr mat-header-row *matHeaderRowDef="displayedColumnsFishingTrips"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumnsFishingTrips;"></tr>
                </table>

                <div class="row">
                    <h2>Number of reservations</h2>
                    <div class="col-4">
                        <h6>Weekly</h6>
                        <table style="margin: 0 auto; width: 90%;" mat-table [dataSource]="dataSourceWeekly" class="mat-elevation-z4">
                            <ng-container matColumnDef="start">
                                <th class="text-center" mat-header-cell *matHeaderCellDef> Start </th>
                                <td mat-cell *matCellDef="let element"> {{element.start | date:'dd.MM.yyyy.'}} </td>
                            </ng-container>

                            <ng-container matColumnDef="numberOfReservations">
                                <th class="text-center" mat-header-cell *matHeaderCellDef> Number of reservations </th>
                                <td mat-cell *matCellDef="let element"> {{element.numOfReservations}} </td>
                            </ng-container>
                        
                            <tr mat-header-row *matHeaderRowDef="displayedColumnsReservations"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsReservations;"></tr>
                        </table>
                        <div id="weekChartDiv" style="display:block;width:75%;height:300px;margin-left: auto;margin-right: auto; margin-bottom: 200px;">
                            <canvas id="weekChartCanv"></canvas>
                        </div>
                    </div>
                    <div class="col-4">
                        <h6>Monthly</h6>
                        <table style="margin: 0 auto; width: 90%;" mat-table [dataSource]="dataSourceMonthly" class="mat-elevation-z4">
                            <ng-container matColumnDef="start">
                                <th class="text-center" mat-header-cell *matHeaderCellDef> Start </th>
                                <td mat-cell *matCellDef="let element"> {{element.start | date:'dd.MM.yyyy.'}} </td>
                            </ng-container>

                            <ng-container matColumnDef="numberOfReservations">
                                <th class="text-center" mat-header-cell *matHeaderCellDef> Number of reservations </th>
                                <td mat-cell *matCellDef="let element"> {{element.numOfReservations}} </td>
                            </ng-container>
                        
                            <tr mat-header-row *matHeaderRowDef="displayedColumnsReservations"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsReservations;"></tr>
                        </table>
                        <div id="monthChartDiv" style="display:block;width:75%;height:300px;margin-left: auto;margin-right: auto; margin-top: 100px; margin-bottom: 100px;">
                            <canvas id="monthChartCanv"></canvas>
                        </div>
                    </div>
                    <div class="col-4">
                        <h6>Yearly</h6>
                        <table style="margin: 0 auto; width: 90%;" mat-table [dataSource]="dataSourceYearly" class="mat-elevation-z4">
                            <ng-container matColumnDef="start">
                                <th class="text-center" mat-header-cell *matHeaderCellDef> Start </th>
                                <td mat-cell *matCellDef="let element"> {{element.start | date:'dd.MM.yyyy.'}} </td>
                            </ng-container>

                            <ng-container matColumnDef="numberOfReservations">
                                <th class="text-center" mat-header-cell *matHeaderCellDef> Number of reservations </th>
                                <td mat-cell *matCellDef="let element"> {{element.numOfReservations}} </td>
                            </ng-container>
                        
                            <tr mat-header-row *matHeaderRowDef="displayedColumnsReservations"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsReservations;"></tr>
                        </table>
                        <div id="yearChartDiv" style="display:block;width:90%;height:300px;margin-left: auto;margin-right: auto;">
                            <canvas id="yearChartCanv"></canvas>
                        </div>
                    </div>
                </div>

                <form [formGroup]="profitForm" (submit)="onSubmit()">
                    <h2>Profit in interval</h2>
                    <div style="text-align: center;">
                        <label style="margin-right: 10px;">From:</label>
                        <input type="date" style="margin-right: 20px;" formControlName="from"/> 
                        <label style="margin-right: 10px;">To:</label>
                        <input type="date" style="margin-right: 40px;" formControlName="to"/> 
                        <button type="submit" mat-raised-button color="primary" [disabled]="!profitForm.valid || profitForm.get('from').value > profitForm.get('to').value">Get total profit</button>
                    </div>
                    <p style="text-align: center; padding-bottom: 15px; font-weight: bold;">Total profit in selected interval:&ensp;{{profitInInterval}}</p>
                </form>
            </div>
        </div>
    </div>
</div>