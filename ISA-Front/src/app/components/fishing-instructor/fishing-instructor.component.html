<div class="container">
    <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12">
            <div class="card shadow-1-strong" style="border-radius: 1rem;">
                <h2>Fishing trips</h2>
                <div class="search-div">
                    <input style="margin-right: 20px;" type="text" placeholder="Name" [(ngModel)]="searchText" />
                    <button mat-raised-button color="primary" (click)="searchFishingTrips()">
                        <mat-icon>search</mat-icon>
                    </button>
                </div>
                <table mat-table [dataSource]="dataSourceFishingTrips" class="mat-elevation-z4">
                    <ng-container matColumnDef="name">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Name </th>
                        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                    </ng-container>
                
                    <ng-container matColumnDef="equipment">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Equipment </th>
                        <td mat-cell *matCellDef="let element"> {{element.equipment}} </td>
                    </ng-container>

                    <ng-container matColumnDef="max_people">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Max people </th>
                        <td mat-cell *matCellDef="let element"> {{element.maxPeople}} </td>
                    </ng-container>
                
                    <ng-container matColumnDef="cost_per_day">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Cost per day </th>
                        <td mat-cell *matCellDef="let element"> {{element.costPerDay}} </td>
                    </ng-container>

                    <ng-container matColumnDef="price_kept_if_reservation_cancelled">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Cancellation fee (%) </th>
                        <td mat-cell *matCellDef="let element"> {{element.percentageInstructorKeepsIfReservationCancelled}}% </td>
                    </ng-container>
                
                    <ng-container matColumnDef="location">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Address </th>
                        <td mat-cell *matCellDef="let element"> {{element.location.streetName}}, {{element.location.cityName}}, {{element.location.countryName}} </td>
                    </ng-container>

                    <ng-container matColumnDef="reservation_tags">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Fishing trip tags </th>
                        <td mat-cell *matCellDef="let element">
                            <div *ngIf="element.fishingTripReservationTags.length === 0">
                                -
                            </div>
                            <div *ngIf="element.fishingTripReservationTags.length !== 0">
                                {{element.fishingTripReservationTags.join(', ')}} 
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="grade">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Grade </th>
                        <td mat-cell *matCellDef="let element"> 
                            <div *ngIf="element.reviews.length === 0">
                                -
                            </div>
                            <div *ngIf="element.reviews.length !== 0">
                                {{element.grade}}
                            </div>
                        </td>
                    </ng-container>
                
                    <tr mat-header-row *matHeaderRowDef="displayedColumnsFishingTrips"></tr>
                    <tr
                        mat-row
                        (dblclick)="goToFishingTrip(row)"
                        (click)="updateClickedRowFishingTrips(row)"
                        [class.demo-row-is-clicked]="clickedRowFishingTrips.id === row.id"
                        *matRowDef="let row; columns: displayedColumnsFishingTrips;"
                    ></tr>
                </table>
                <div class="fishing-trip-buttons">
                    <button style="margin-right: 20px;" mat-raised-button color="primary" (click)="goToAddFishingTrip()">Add fishing trip</button>
                    <button style="margin-right: 20px;" mat-raised-button color="primary" [disabled]="clickedRowFishingTrips.id === undefined" (click)="goToEditFishingTrip()">Edit fishing trip info</button>
                    <button mat-raised-button color="primary" [disabled]="clickedRowFishingTrips.id === undefined" (click)="deleteFishingTrip()">Delete fishing trip</button>
                </div>
                <div class="fishing-trip-buttons">
                    <button mat-raised-button color="primary" [disabled]="clickedRowFishingTrips.id === undefined" (click)="goToEditFishingTripPictures()">Edit fishing trip pictures</button>
                </div>
                <div class="fishing-trip-buttons">
                    <button style="margin-right: 20px;" mat-raised-button color="primary" [disabled]="clickedRowFishingTrips.id === undefined" (click)="goToAddReservation()">Add reservation</button>
                    <button mat-raised-button color="primary" [disabled]="clickedRowFishingTrips.id === undefined" (click)="goToAddAction()">Add action</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div style="margin-top: 50px;" class="container">
    <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12">
            <div class="card shadow-1-strong" style="border-radius: 1rem;">
                <h2 style="padding: 30px;">Reservations</h2>
                <table mat-table [dataSource]="dataSourceReservations" class="mat-elevation-z4">
                    <ng-container matColumnDef="start">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Start </th>
                        <td mat-cell *matCellDef="let element"> {{element.start | date:'dd.MM.yyyy.'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="end">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> End </th>
                        <td mat-cell *matCellDef="let element"> {{element.end | date:'dd.MM.yyyy.'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="number_of_people">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Number of people </th>
                        <td mat-cell *matCellDef="let element"> {{element.numberOfPeople}} </td>
                    </ng-container>

                    <ng-container matColumnDef="price">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Price </th>
                        <td mat-cell *matCellDef="let element"> {{element.price}} </td>
                    </ng-container>

                    <ng-container matColumnDef="system_tax">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> System tax (%) </th>
                        <td mat-cell *matCellDef="let element"> {{element.systemTaxPercentage}}% </td>
                    </ng-container>

                    <ng-container matColumnDef="reservation_tags">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Reservation tags </th>
                        <td mat-cell *matCellDef="let element">
                            <div *ngIf="element.fishingTripReservationTags.length === 0">
                                -
                            </div>
                            <div *ngIf="element.fishingTripReservationTags.length !== 0">
                                {{element.fishingTripReservationTags.join(', ')}} 
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="fishing_trip">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Fishing trip </th>
                        <td mat-cell *matCellDef="let element"> {{element.fishingTrip.name}} </td>
                    </ng-container>

                    <ng-container matColumnDef="client">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Client </th>
                        <td mat-cell *matCellDef="let element"> {{element.client.firstName}} {{element.client.lastName}} </td>
                    </ng-container>

                    <ng-container matColumnDef="client_came">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Client came </th>
                        <td mat-cell *matCellDef="let element">
                            <div *ngIf="element.ownerCommentary === null">
                                -
                            </div>
                            <div *ngIf="element.ownerCommentary !== null && element.ownerCommentary.clientCame === true">
                                yes
                            </div>
                            <div *ngIf="element.ownerCommentary !== null && element.ownerCommentary.clientCame === false">
                                no
                            </div>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumnsReservations"></tr>
                    <tr
                        mat-row
                        (click)="updateClickedRowReservations(row)"
                        [class.demo-row-is-clicked]="clickedRowReservations.id === row.id"
                        *matRowDef="let row; columns: displayedColumnsReservations;"
                    ></tr>
                </table>
                <div class="fishing-trip-buttons">
                    <button style="margin-right: 20px;" mat-raised-button color="primary" [disabled]="clickedRowReservations.id === undefined">Add reservation report</button>
                    <button mat-raised-button color="primary" [disabled]="clickedRowReservations.id === undefined" (click)="goToClientProfileFromReservations()">Go to client profile</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div style="margin-top: 50px;" class="container">
    <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12">
            <div class="card shadow-1-strong" style="border-radius: 1rem;">
                <h2 style="padding: 30px;">Actions</h2>
                <table mat-table [dataSource]="dataSourceActions" class="mat-elevation-z4">
                    <ng-container matColumnDef="start">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Start </th>
                        <td mat-cell *matCellDef="let element"> {{element.start | date:'dd.MM.yyyy.'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="end">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> End </th>
                        <td mat-cell *matCellDef="let element"> {{element.end | date:'dd.MM.yyyy.'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="valid_until">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Valid until </th>
                        <td mat-cell *matCellDef="let element"> {{element.validUntilAndIncluding | date:'dd.MM.yyyy.'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="max_people">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Max people </th>
                        <td mat-cell *matCellDef="let element"> {{element.maxPeople}} </td>
                    </ng-container>

                    <ng-container matColumnDef="price">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Price </th>
                        <td mat-cell *matCellDef="let element"> {{element.price}} </td>
                    </ng-container>

                    <ng-container matColumnDef="system_tax">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> System tax (%) </th>
                        <td mat-cell *matCellDef="let element"> {{element.systemTaxPercentage}}% </td>
                    </ng-container>

                    <ng-container matColumnDef="location">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Address </th>
                        <td mat-cell *matCellDef="let element"> {{element.location.streetName}}, {{element.location.cityName}}, {{element.location.countryName}} </td>
                    </ng-container>

                    <ng-container matColumnDef="action_tags">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Action tags </th>
                        <td mat-cell *matCellDef="let element">
                            <div *ngIf="element.fishingTripReservationTags.length === 0">
                                -
                            </div>
                            <div *ngIf="element.fishingTripReservationTags.length !== 0">
                                {{element.fishingTripReservationTags.join(', ')}} 
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="fishing_trip">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Fishing trip </th>
                        <td mat-cell *matCellDef="let element"> {{element.fishingTrip.name}} </td>
                    </ng-container>

                    <ng-container matColumnDef="client">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Client </th>
                        <td mat-cell *matCellDef="let element">
                            <div *ngIf="element.client === null">
                                -
                            </div>
                            <div *ngIf="element.client !== null">
                                {{element.client.firstName}} {{element.client.lastName}} 
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="client_came">
                        <th class="text-center" mat-header-cell *matHeaderCellDef> Client came </th>
                        <td mat-cell *matCellDef="let element">
                            <div *ngIf="element.ownerCommentary === null">
                                -
                            </div>
                            <div *ngIf="element.ownerCommentary !== null && element.ownerCommentary.clientCame === true">
                                yes
                            </div>
                            <div *ngIf="element.ownerCommentary !== null && element.ownerCommentary.clientCame === false">
                                no
                            </div>
                         </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumnsActions"></tr>
                    <tr
                        mat-row
                        (click)="updateClickedRowActions(row)"
                        [class.demo-row-is-clicked]="clickedRowActions.id === row.id"
                        *matRowDef="let row; columns: displayedColumnsActions;"
                    ></tr>
                </table>
                <div class="fishing-trip-buttons">
                    <button style="margin-right: 20px;" mat-raised-button color="primary" [disabled]="clickedRowActions.id === undefined">Add action report</button>
                    <button mat-raised-button color="primary" [disabled]="clickedRowActions.id === undefined || clickedRowActions.client === null" (click)="goToClientProfileFromActions()">Go to client profile</button>
                </div>
            </div>
        </div>
    </div>
</div>